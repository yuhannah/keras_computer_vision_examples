## OCR 识别文字算法

### 流程

- 识别出文字区域 (text detection)

  通过滑动窗口算法，遍历整个图片，根据监督算法识别图片中是否存在目标文字区域，将该区域进行矩形化并摘取出来

- 对文字区域矩形分割，拆分成不同的字符 (character segmentation)

  在矩形中做一维滑动窗口移动，判断字符间间距，对字符进行划分

- 字符分类 (character classification)

  对划分好的字符根据监督算法进行预测

- 识别出来文字

第一步识别目标区域，可以通过类似目标识别的算法进行提取。



## OCR 读验证码模型

### 介绍
这个例子演示了一个用函数 API 构建的简单 OCR 模型。除了结合 CNN 和 RNN 之外，它还说明了如何实例化一个新层并将其用作实现 CTC 损失的“端点层”。有关层子类化的详细指南，请查看开发人员指南中的此页。

### 



### 加载数据

加载验证码数据集：

```shell
!curl -LO https://github.com/AakashKumarNain/CaptchaCracker/raw/master/captcha_images_v2.zip
!unzip -qq captcha_images_v2.zip
```

该数据集包含 1040 个 png 图像的验证码文件。每个示例的标签是一个字符串，即文件名（减去文件扩展名）。我们将字符串中的每个字符映射到一个整数，以训练模型。同样，我们需要将模型的预测映射回字符串。为此，我们将维护两个字典，分别映射字符到整数和整数到字符。

### 预处理

生成两个字典，`char_to_num`用于映射字符到整数，`num_to_char`用于映射整数到字符。

得到数据集的数量，并生成一个同等大小的序列，将序列打乱，用于拆分成训练集和验证集。

对图像进行编码：

读取一幅验证码图片，灰度化，转换成浮点数类型，调整成固定尺寸，交换维度的顺序，将宽对应的维度置为首位，用以与时间轴对应。将字符串形式的标签转换成数字形式。

### 创建数据集

### 可视化数据

### 构造模型

构造一个包含 CNN，RNN，CTC 层的模型。

### 训练模型参数

训练 100 次，准确度达到 50%。

### 得出结论

将预测的结果由数字转换成字符串。



